<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="/libs/katex/katex.min.css">
 
   <link rel="stylesheet" href="/libs/highlight/github.min.css">
 
  
  <link rel="stylesheet" href="/css/franklin.css">
  <link rel="stylesheet" href="/css/basic.css">

  <link rel="icon" href="/assets/favicon.png">
  <link rel="icon" href="/assets/favicon.ico">
   <title> Q1 - mdo-lab </title> 
  

   <meta property="og:title" content="Q1" /> 
  
  
  

   <meta name="twitter:title" content="Q1" /> 
  
  
  
</head>
<body>
  <header>
<div class="blog-name"><a href="/">mdo-lab</a></div>
<nav>
  <ul>
    <li><a href="/about/">About</a></li>
    <li><a href="/mdo/">mdo</a></li>
  </ul>
  <img src="/assets/hamburger.svg" id="menu-icon">
</nav>
</header>


<div class="franklin-content">
  
</div>
<div class="franklin-content"><p><hr /> title: Endsem date: 24/02/2021 â€“-</p>
<h1 id="q1"><a href="#q1" class="header-anchor">Q1</a></h1>
<p>Rewrite the following code to make it fast and consume minimum amount of memory. Your program should give <strong>exactly</strong> the same output as the following program. &#40; <strong>5 marks</strong> &#41;</p>
<pre><code class="language-C">#include&lt;iostream&gt;
#include&lt;cmath&gt;

int
main&#40;&#41;&#123;
  float a&#91;100&#93;&#91;100&#93;, ans&#61;0.0;

  for&#40;int i&#61;0; i &lt; 100; i&#43;&#43;&#41;&#123;
    for&#40;int j&#61;0; j &lt; 100; j&#43;&#43;&#41;&#123;
      a&#91;i&#93;&#91;j&#93; &#61; &#40;i&#43;1.0&#41;/&#40;j&#43;1.0&#41;;
    &#125;
  &#125;

  for&#40;int i&#61;0; i &lt; 100; i&#43;&#43;&#41;&#123;
    for&#40;int j&#61;99; j &gt;&#61; 0; j--&#41;&#123;
      if&#40;i&gt;&#61;j &amp;&amp; i&lt;&#61;j&#41;&#123;
        a&#91;i&#93;&#91;j&#93; &#61; a&#91;i&#93;&#91;j&#93;*sin&#40;M_PI*&#40;i&#43;2&#41;/2/&#40;j&#43;1&#41;&#41;/100;
        ans &#43;&#61; a&#91;i&#93;&#91;j&#93;;
      &#125;
    &#125;
  &#125;
  std::cout &lt;&lt; ans &lt;&lt; std::endl;
  return&#40;0&#41;;
&#125;</code></pre>
<p><strong>Solution</strong> : We note:</p>
<ol>
<li><p>The second loop is only working on the diagonal elements. So essentially we</p>
</li>
</ol>
<p>need only a single <code>for</code> loop for calculation. Only the diagonal entries are of interest. &#40;** 1 mark **&#41;</p>
<ol start="2">
<li><p>Now since only the diagonal entries are of interest, we also notice that the</p>
</li>
</ol>
<p>first loop is initializing the elements of <code>a</code> in such a way that all the diagonal elements come out to be 1. So this initialization step can also be eliminated. &#40; <strong>1 mark</strong> &#41;</p>
<ol start="3">
<li><p>We also notice that the division by 100 is being performed repeated and</p>
</li>
</ol>
<p>is independent of <code>i</code> and <code>j</code>. Hence it can be moved out of the loop there by saving us many division operations. &#40; <strong>1 mark</strong> &#41;</p>
<ol start="4">
<li><p>Similarly, I can define a variable <code>pibytwo</code> and avoid a lot of divisions.</p>
</li>
</ol>
<p>Now, you might feel that one more variable is being added and memory consumption has increased. But if we consider the trade off, one extra variable is nothing compared to <code>100</code> division operations. So this is a no brainer. &#40; <strong>0.5 marks</strong> &#41;</p>
<ol start="5">
<li><p>Also, \(pibytwo*(i+2)/(i+1) = pibytwo + pibytwo/(i+1)\). So I have converted &#40;</p>
</li>
</ol>
<p>2 additions &#43; 1 division &#43; 1 multiplication&#41; into &#40;1 addition &#43; 1 division&#41;. &#40; <strong>0.5 marks</strong> &#41;</p>
<ol start="6">
<li><p>But now I notice that I don&#39;t even have to do that addition <code>i&#43;1</code>. I can</p>
</li>
</ol>
<p>simply modify the <code>for</code> loop from <code>0-99</code> to <code>1-100</code>. This is a standard trick in computing and you should always keep this in mind while writing any code.&#40; <strong>1 mark</strong> &#41;</p>
<ol start="7">
<li><p>In fact, \(\pi/2\) is available in <code>cmath</code> as <code>M_PI_2</code>. You may not know this.</p>
</li>
</ol>
<p>So I have not deducted marks for this. We could have saved on one more division operation.</p>
<p>Here are my two versions of the fastest code:</p>
<p>Without <code>M_PI_2</code></p>
<pre><code class="language-C">#include&lt;iostream&gt;
#include&lt;cmath&gt;

int
main&#40;&#41;&#123;
  float ans&#61;0.0, pibytwo;
  pibytwo &#61; M_PI/2;
  for&#40;int i&#61;1; i &lt;&#61; 100; i&#43;&#43;&#41;&#123;
    ans &#43;&#61;  sin&#40;pibytwo &#43; pibytwo/&#40;i&#41;&#41;;
  &#125;
  std::cout &lt;&lt; ans/100 &lt;&lt; std::endl;
  return&#40;0&#41;;
&#125;</code></pre>
<p>With <code>M_PI_2</code></p>
<pre><code class="language-C">#include&lt;iostream&gt;
#include&lt;cmath&gt;

int
main&#40;&#41;&#123;
  float ans&#61;0.0;
  for&#40;int i&#61;1; i &lt;&#61; 100; i&#43;&#43;&#41;&#123;
    ans &#43;&#61;  sin&#40;M_PI_2 &#43; M_PI_2/&#40;i&#41;&#41;;
  &#125;
  std::cout &lt;&lt; ans/100 &lt;&lt; std::endl;
  return&#40;0&#41;;
&#125;</code></pre>
<p>Both solutions get full marks.</p>
<div class="page-foot">
  <div class="copyright">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Devendra Ghate. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div><!-- CONTENT ENDS HERE -->
    
        <script src="/libs/katex/katex.min.js"></script>
<script src="/libs/katex/auto-render.min.js"></script>
<script>renderMathInElement(document.body)</script>

    
    
        <script src="/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>

    
  </body>
</html>
